openapi: 3.0.0

info:
    title: Test App
    description: Test API
    version: 1.0.0

servers:
    - url: /api/v1

components:
    securitySchemes:
        ApiKeyAuth:
            type: apiKey
            in: header
            name: X-API-KEY
            x-apikeyInfoFunc: app.auth.api_key_info

    schemas:
        User:
            type: object
            properties:
                osu_id:
                    type: integer

    parameters:
        osu_id:
            name: osu_id
            description: osu! user ID
            in: path
            required: True
            schema:
                type: integer

    responses:
        UnauthorizedError:
            description: X-API-KEY is missing in the header or invalid
            headers:
                WWW-Authenticate:
                    schema:
                        type: string

paths:
    /users:
        get:
            summary: Returns a list of users
            tags:
                - Users
            security:
                - ApiKeyAuth: []
            responses:
                200:
                    description: Successfully retrieved all users
                401:
                    $ref: "#/components/responses/UnauthorizedError"
                default:
                    description: Pass

    /leaderboards:
        get:
            summary: Returns statistics of active leaderboards
            tags:
                - Leaderboards
            responses:
                200:
                    description: Successfully retrieved statistics
                default:
                    description: Pass

    /leaderboards/{beatmap-id}:
        get:
            summary: Returns the leaderboard of the beatmap's latest version
            tags:
                - Leaderboards
            responses:
                200:
                    description: Successfully retrieved leaderboard
                default:
                    description: Pass

    /leaderboards/{beatmap-id}/versions:
        get:
            summary: Returns a list of the beatmap's leaderboard versions
            tags:
                - Leaderboards
            responses:
                200:
                    description: Successfully retrieved leaderboard versions
                default:
                    description: Pass

    /leaderboards/{beatmap-id}/versions/{version}:
        get:
            summary: Returns the leaderboard of the beatmap's specified version
            tags:
                - Leaderboards
            responses:
                200:
                    description: Successfully retrieved leaderboard
                default:
                    description: Pass